<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://image.ibb.co/nqbdHJ/titlelogo.png" rel="icon">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
    </script>
    <link href="https://raw.githack.com/Arza-3d/ar3.js/master/stylesheets/ar3.min.css?v=1.1" rel="stylesheet" type="text/css">
    <title>🎮 jump mechanic study in UE4</title>
  </head>
  <body
    data-repo-r3="https://github.com/Arza-3d/UE4-jump-mechanic"
    data-headers-r3="> div > h2| > div > h3 "
  >
    <script src="https://raw.githack.com/Arza-3d/ar3.js/master/ar3header.js"></script>
    <header>
      <h1>jump mechanic</h1>
      <h4>jump mechanic study in Unreal Engine 4</h4>
      <table>
        <tr>
          <td>author</td>
          <td>Forest Guhareza</td>
        </tr>
        <tr>
          <td>game engine</td>
          <td>Unreal Engine 4.19.2</td>
        </tr>
        <tr>
          <td>project template</td>
          <td>Third Person</td>
        </tr>
        <tr>
          <td>project repository</td>
          <td><a href="https://github.com/Arza-3d/UE4-jump-mechanic">github.com/Arza-3d/UE4-jump-mechanic</a></td>
        </tr>
      </table>
      <p>
        This project <mark>is focus study on jump mechanics in UE4</mark>. The study will be done by recreating as many <b>jump mechanics</b> as possible in:<br> <code style="display:initial">📁Content/📁BlueprintComponents/📁JumpMechanic/<a href="https://github.com/Arza-3d/UE4-jump-mechanic/tree/master/Content/BlueprintComponents/JumpMechanic/ChildClass">📁ChildClass</a></code>. <br>Every jump mechanic will be contained in <b>blueprint component</b> for reusability.
      </p>
      <p>note: <u style="text-decoration-color:red">Epic assets that are used in this project are <b>gitignored</b></u>.<br>Project download link: <button><a href="https://codeload.github.com/Arza-3d/UE4-jump-mechanic/zip/master">project(zip)</a></button> </p>

    </header>
    <main class="aside-nav-target-r3">

      <div data-title-r3="jump mechanics:">
        <h2>jump ability:</h2>
        <p>
          <mark>jump mechanic BP components  only deal with jump physics</mark>, SFX and animation, which is character specific, is done inside characterBP and animBP.
        </p>
        <p>
          Actually you don't need to download all the project to use this jump mechanic BP, you can just copy it in your project. Since every jump mechanic BP's are children of <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/JumpMechanic.uasset">
          <code>
            <img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">JumpMechanic
          </code>
          </a>, you also need to copy that. I will put the download link of the file in the first line of every section, just <mark>make sure you put it in the same folder address</mark>, and it will work.
          The address are:
        </p>
        <ul>
          <li>
            parent address:<br>
            <code>
              📁Content/📁BlueprintComponents/📁JumpMechanic/<a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/JumpMechanic.uasset">
              <code>
                <img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">JumpMechanic
              </code>
            </a>
            </code>
          </li>
          <li>
            <b>The jump mechanic BP</b> (children) address:<br>
            <code>
              📁Content/📁BlueprintComponents/📁JumpMechanic/📁ChildClass/
            </code>
          </li>
        </ul>

        <h3>SprintJump</h3>
        <section>
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/JumpMechanic.uasset">
            <code>
              <img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">JumpMechanic
            </code>
          </a>
          &#9658;
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/ChildClass/SprintJump.uasset">
            <code>
              <img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">SprintJump
            </code>
          </a>
          <hr>
          <video src="D:\vid\Captures\SprintJump.mp4" controls width="80%"></video>
          <br>
          example use in video:
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/CharacterExamples/SprintJump/FengMaoAnimBP_SprintJump.uasset">
            <code>
              FengMaoAnimBP_SprintJump
            </code>
          </a>
          +
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/CharacterExamples/SprintJump/FengMaoCharBP_SprintJump.uasset">
            <code>
              FengMaoCharBP_SprintJump
            </code>
          </a>
          <hr>
          <p>
            <b>Sprint jump</b> : character ability to jump higher when they jump after sprinting. Sprint jump height will be based on character horizontal speed before jump.
          </p>
          <p>
            I think <a href="https://en.wikipedia.org/wiki/Super_Mario_Bros.">Mario Bros</a> and <a href="https://en.wikipedia.org/wiki/Pepsiman_(video_game)">Pepsiman</a> use this jump mechanic.
          </p>

          <hr>
          <p>Implementation example of <code>SprintJump</code> inside character blueprint:</p>
          <img src="https://image.ibb.co/bxYgdA/sprint-Jump-Graph.jpg" alt="sprint-Jump-Graph">
          <p>Note;</p>
          <ul>
            <li>make sure <code><span class="grey-r3">SprintJump.</span>MaxJumpZVelocity</code> &gt; <code>JumpZVelocity</code>,</li>
            <li>make sure <code><span class="grey-r3">SprintJump.</span>MaxSprintSpeed</code> &gt; <code>MaxWalkSpeed</code>.</li>
          </ul>
        </section>

        <h3>SprintJump_auto</h3>
        <section>
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/JumpMechanic.uasset">
            <code>
              <img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">JumpMechanic class
            </code>
          </a>
          &#9658;
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/ChildClass/SprintJump.uasset">
            <code>
              <img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">SprintJump_auto class
            </code>
          </a>
          <p>
            Character has no sprint input, so the normal jump will always depended on how fast it walked before the jump. I think Unravel used this system.
          </p>

        </section>

        <h3>Secondary Jump</h3>
        <section>
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/JumpMechanic.uasset">
            <code>
              <img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">JumpMechanic class
            </code>
          </a>
          &#9658;
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/SprintJump.uasset">
            <code>
              <img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">SecondaryJump class
            </code>
          </a>
          <hr>
          <video src="D:\vid\Captures\SecondaryJump.mp4" controls width="80%"></video>
          <hr>
          <p>
            <b>Secondary jump</b>: when character has 2 set of jump modes. There are the default jump and the secondary jump (which usually is higher than the default jump)
          </p>
          <p>Rikimaru and Ayame from <a href="https://en.wikipedia.org/wiki/Tenchu_2:_Birth_of_the_Stealth_Assassins">Tenchu 2</a> use secondary jump mechanism.</p>
        </section>

        <h2>fall ability:</h2>
        <p>Below is the jump mechanic that is active after the fall / after character reach jump apex.</p>
        <h3>JumpThenGlide</h3>
        <section>
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/JumpMechanic.uasset">
            <code><img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">JumpMechanic</code>
          </a>
          &#9658;
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/ChildClass/JumpThenGlide.uasset">
            <code><img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">JumpThenGlide</code>
          </a>
          <hr>
          <video src="D:\vid\Captures\JumpThenGlide.mp4" controls width="80%"></video>
          <hr>
          <p>Character able to glide in the air after jump. <br>I think <a href="https://en.wikipedia.org/wiki/Rayman_Legends">Rayman</a> and Spyro used this jump mechanic.</p>
          <p>This component contains these events:</p>
          <ul>
            <li><code>InputActionJumpPressed</code> or <code>InputActionJumpPressed_estimated</code></li>
            <li><code>InputActionJumpReleased</code></li>
            <li><code>EventOnLanded </code></li>
          </ul>
        </section>

        <h2>jump mechanic parent</h2>
        <h3>JumpMechanic</h3>
        <section>
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpMechanic/JumpMechanic.uasset">
            <code><img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">JumpMechanic class</code>
          </a>
          <p><code>JumpMechanic</code> is <code>BlueprintComponent</code> that will be the <b>parent class</b> of all jump mechanics that will be created in this project.</p>
          <p>Event &amp; function:</p>
          <ul>
            <li>
              <code>GetJumpPeak</code> will return <code>JumpPeak</code> <b>event dispatcher</b> call when <code>Character</code> reach the highest point of the jump. <br>This will be <u>calculated per frame</u> by checking, is <code>Character</code> \(v_z \leq 0\), if it is do <code>JumpPeak</code> call.
            </li>
            <li>
              <code>GetJumpPeak_estimated</code> has same function with <code>GetJumpPeak</code>, <br>
              but this will <u>calculated once</u>, by finding out the time <code>Character</code> reach the highest point of the jump with: $$t_{peak} = v_{z_{(t_0)}}/g$$
            </li>
            <!--
            <li>
              <code><span style="color:green">float</span> CalculateJumpZVelocity(<span style="color:green">float</span> Height);</code> is function that calculate <code>JumpZVelocity</code> based on the <b>desired max jump height</b>.
              <br>
              <details>
                <summary>the math of the function:</summary>
                <img src="https://image.ibb.co/fA2Od0/Gravity-Formula-Copy.jpg" alt="Gravity-Formula-UE4">
              </details>
              <details>
                <summary>example:</summary>

                  Make character that jump <b style="color:green">200</b> cm. So the <code>JumpZVelocity</code> is:
                <code>Character.JumpZVelocity = _JumpMechanic.CalculateJumpZVelocity(<b style="color:green">200</b>);</code>
              </details>
              <br>
            -->
            </li>
          </ul>
        </section>
      </div>
      <div data-title-r3="additional BPcomponent">
        <h2>tracker BP</h2>
        <p>These are additional blueprint components that is used to help showing data related to character jump.</p>
        <h3>JumpTracker</h3>
        <section>
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/blob/master/Content/BlueprintComponents/JumpTracker/JumpTracker.uasset">
            <code>
            <img src="https://image.ibb.co/c4VKMV/UE4-blueprint-component.jpg" alt="UE4-blueprint-component">JumpTracker class
            </code>
          </a> +
          <a href="https://github.com/Arza-3d/UE4-jump-mechanic/tree/master/Content/BlueprintComponents/JumpTracker/Component"><code>📁JumpTracker  component</code></a>
          <p>This is used to show the jump track and show this data:</p>
          <ul>
            <li>jump height (z)</li>
            <li>jump distance (x, y)</li>
            <li>jump time (optional)</li>
          </ul>
          <hr>
          <p>How to use:</p>
          <ol>
            <li>attach this actor component to <code>character</code> blueprint, then inside <code>character</code> event graph;</li>
            <li>... on <code>EventOnJumped</code> call <code>JumpTracker.EventOnJumped</code></li>
            <li>... on <code>EventOnLanded</code> call <code>JumpTracker.EventOnLanded</code></li>
          </ol>
        </section>
        <h3>KeyboardTracker</h3>
        <section>
          <p>This is used to show the button input that is pressed during the demo</p>
        </section>
      </div>
      <div data-title-r3="basic">
        <h2>basic physics of jump</h2>

        <h3>Jump cheatsheet</h3>
        <section>
          <p>Here are some possible problem to solve related to jump:</p>
          <ol>
            <li>
              If a cat has to pass box with <b class="green-r3">\(h\)</b> height,
              <br>
              how much initial jump z velocity <span class="red-r3">\(v_{z0}\)</span> that the cat needs:
              <img src="https://image.ibb.co/gzYsaq/problem1.jpg" alt="problem1">
              Using this equation:
              $$v_{z0} = \sqrt{2gh}$$

              <table class="math-def-r3">
                <thead>
                  <tr>
                    <th>symbol</th>
                    <th>definition</th>
                    <th>blueprint</th>
                    <th title="editable inside character class?">editable?</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="red-r3">\(v_{z0}\)</td>
                    <td>initial z velocity</td>
                    <td><img src="https://image.ibb.co/muaGkq/vz.jpg" alt="vz"></td>
                    <td>yes</td>
                  </tr>
                  <tr>
                    <td>\(g\)</td>
                    <td>gravity</td>
                    <td><img src="https://image.ibb.co/jDHFBV/gravity.jpg" alt="gravity"></td>
                    <td>only <code>GravityScale</code></td>
                  </tr>
                  <tr>
                    <td class="green-r3">\(h\)</td>
                    <td>max jump height</td>
                    <td></td>
                    <td>no</td>
                  </tr>
                </tbody>
              </table>
              <br>
              for the cat to pass the box with height <b class="green-r3">\(h\)</b> = <input type="number" min="0" onchange="findJumpZVelocity1('#findJumpZVelocityWithMaxHeight-r3x', 'findJumpZVelocityWithMaxHeight-r3x0')"  onclick="findJumpZVelocity1('#findJumpZVelocityWithMaxHeight-r3x', 'findJumpZVelocityWithMaxHeight-r3x0')" id="findJumpZVelocityWithMaxHeight-r3x0" value="40"> \(cm\),
              <br>then the cat at least need to jump with <br><span class="red-r3">\(v_{z0}\)</span> \(=\) <code>JumpZVelocity</code> \(\approx\) <b id="findJumpZVelocityWithMaxHeight-r3x">280.00</b> \(cm/s\)
              <script>
                function findJumpZVelocity1(printTarget, inputTarget) {
                  var jumpHeight =  document.getElementById(inputTarget).value;
                  jumpHeight = Number(jumpHeight);
                  var x2 = Math.sqrt(2*980*jumpHeight);
                  x2 = x2.toFixed(2);
                  $(printTarget).html(x2);
                }
              </script>
            </li>
            <hr>
            <li>
              If a cat in small room with ceiling distance above his head <b class="green-r3">\(h\)</b> need to pass gap with <b class="green-r3">\(l\)</b> distance,<br>
              how much cat maximum z-initial speed <span class="red-r3">\(v_{z0}\)</span> so it won't hit the ceiling?
              <br>and how fast the cat should run <span class="red-r3">\(v_{xy}\)</span> before the jump to pass that gap?
              <img src="https://image.ibb.co/eYK3GV/problem2.jpg" alt="problem2">
              <br>
              $$v_{xy} = \frac{gl}{2v_{z0}}$$
              <table class="math-def-r3">
                <thead>
                  <tr>
                    <th>symbol</th>
                    <th>definition</th>
                    <th>blueprint</th>
                    <th title="editable inside character class?">editable?</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="red-r3">\(v_{xy}\)</td>
                    <td>initial xy velocity</td>
                    <td><img src="https://image.ibb.co/cmXhrV/height.jpg" alt="height"></td>
                    <td>yes</td>
                  </tr>
                  <tr>
                    <td class="green-r3">\(l\)</td>
                    <td>jump max horizontal distance</td>
                    <td></td>
                    <td>no</td>
                  </tr>
                </tbody>
              </table>
              <br>
              if celing distance above cat head <b class="green-r3">\(h\)</b> = <input type="number" value="40" min="0" onchange="findJumpZVelocity1('#findJumpZVelocity2-r3x', 'findJumpZVelocity2-r3x0');findMaxWalkVelocity()"
              onclick="findJumpZVelocity1('#findJumpZVelocity2-r3x', 'findJumpZVelocity2-r3x0');findMaxWalkVelocity()"
               id="findJumpZVelocity2-r3x0"> \(cm\)
              <br>and the gap distance <b class="green-r3">\(l\)</b> = <input type="number" value="150" min="0" id="jumpDistance-r3x2" onchange="findMaxWalkVelocity()" onclick="findMaxWalkVelocity()">\(cm\)
              <br>then for the cat to not hit ceiling, the cat;<br>maximum <span class="red-r3">\(v_{z0}\)</span> \(=\) <code>JumpZVelocity</code> \(\approx\) <b id="findJumpZVelocity2-r3x">280.00</b> \(cm/s\)<br> and for cat to jump that gap it need <br>minimum <span class="red-r3">\(v_{xy}\)</span> \(=\)  <code>MaxWalkSpeed</code> \(\approx\) <b id="finddMaxJumpDistance-r3x">1837.50</b> \(cm/s\) </li>
              <script>
                function findMaxWalkVelocity() {

                    var jumpZ = $('#findJumpZVelocity2-r3x0').val(),
                        jumpDistance = $('#jumpDistance-r3x2').val();
                    jumpZ = Number(jumpZ);
                    jumpDistance = Number(jumpDistance);
                    $("#finddMaxJumpDistance-r3x").html(((980*jumpDistance)/(2*jumpZ)).toFixed(2));
                }
              </script>
          </ol>
        </section>
      </div>
    </main>
    <script src="https://raw.githack.com/Arza-3d/ar3.js/master/ar3.min.js"></script>

  </body>
</html>
